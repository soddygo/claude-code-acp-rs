# Prometheus Configuration
# Scrapes spanmetrics from OpenTelemetry Collector

global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # Scrape spanmetrics from OpenTelemetry Collector
  - job_name: 'otel-collector-spanmetrics'
    static_configs:
      - targets: ['otel-collector:8889']
    # Add service discovery labels
    relabel_configs:
      - source_labels: [__address__]
        target_label: instance
        replacement: otel-collector

  # Scrape OTel Collector's own metrics (optional, for debugging)
  - job_name: 'otel-collector-internal'
    static_configs:
      - targets: ['otel-collector:8888']

